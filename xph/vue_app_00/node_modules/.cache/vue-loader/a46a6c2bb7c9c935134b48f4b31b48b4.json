{"remainingRequest":"C:\\Users\\web\\Desktop\\lxm\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\web\\Desktop\\lxm\\vue_app_00\\src\\components\\xph\\login.vue?vue&type=style&index=0&lang=css","dependencies":[{"path":"C:\\Users\\web\\Desktop\\lxm\\vue_app_00\\src\\components\\xph\\login.vue","mtime":1561944034932},{"path":"C:\\Users\\web\\Desktop\\lxm\\vue_app_00\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\web\\Desktop\\lxm\\vue_app_00\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"C:\\Users\\web\\Desktop\\lxm\\vue_app_00\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\web\\Desktop\\lxm\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\web\\Desktop\\lxm\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n/* .mint-button--primary{background-color: #ff458e!important} */\r\n.back{position: absolute;left:3%;top:1.5%;z-index: 999;}\r\n.back button{background: transparent;border: none;color: #fff;font-size: 0.5rem;}\r\n.con-top{width:100%;height: 1.4rem;position: absolute;background-color: #26a2FF;top:0%;text-align:center;color: #fff;line-height: 1.4rem}\r\n.mt{position: absolute;top:18%;left: 6%;}\r\n.mint-cell-value{padding-top: 2%!important}\r\n.mt-bt{position:relative;line-height: 0.3rem}\r\n.mt-size,.mt-size2{width:70%!important;margin-left: 16%;}\r\n.mt-size{margin-top: 85%;}\r\n.mt-size2{margin-top: 3%;}\r\n",{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src\\components\\xph","sourcesContent":["<template>\r\n    <div>\r\n        <router-link  to=\"/\"></router-link>   \r\n        <div class=\"con-top\">\r\n            <span>登录 / 注册</span>\r\n        </div>\r\n        <div class=\"mt\">\r\n            <mt-field label=\"用户名\" placeholder=\"请输入用户名\" v-model=\"uname\"></mt-field>\r\n            <mt-field label=\"密码\" placeholder=\"请输入密码\" v-model=\"upass\" type=\"password\"></mt-field>\r\n            <!-- <mt-field label=\"手机号\" placeholder=\"请输入手机号\" type=\"tel\" v-model=\"tel\"  v-show=\"isShow\"   @click=\"rig\" ></mt-field> -->\r\n            <span v-show=\"isShow\" style=\"position:absolute;top:75%;left:3%;\">手机号</span>  <input style=\"width:65%;margin-left:32%;\" @blur=\"rig\" type=\"text\" v-model=\"tel\" placeholder=\"请输入手机号\" v-show=\"isShow\">\r\n        </div>\r\n        <div style=\"width:100%;text-align:center;\">\r\n           <div class=\"mt-bt\">\r\n                <mt-button type=\"primary\" size=\"large\" class=\"mt-size\" @click=\"login\">登录</mt-button>\r\n                <mt-button size=\"large\" class=\"mt-size2\" plain @click=\"showToggle\">注册</mt-button>     \r\n           </div>  \r\n        </div> \r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data(){\r\n        return{\r\n            uname:'',\r\n            upass:'',\r\n            isShow:'',\r\n            tel:''\r\n        }\r\n    },\r\n\r\n    methods:{\r\n        rig(){\r\n            var tel=this.tel\r\n            var obj={utel:tel}\r\n            var url=\"phone\"; \r\n            this.axios.get(url,{params:obj}).then(result=>{\r\n                //console.log(result)\r\n                if(result.data.length<1){\r\n                return;\r\n                }else{\r\n                this.$toast(\"该手机号已注册\");\r\n                this.tel=\"\";\r\n                return;\r\n                }\r\n            }) \r\n        },\r\n\r\n        login(){\r\n           //1.获取用户输入用户名\r\n           //2.获取用户登录密码\r\n            var n=this.uname;\r\n            var p=this.upass;\r\n           //3.创建两个正则表达式/^\\d{3,10}$/\r\n            var nreg=/^[a-zA-Z0-9]{3,10}$/;//创建验证用户名的正在表达式\r\n            var preg=/^[a-zA-Z0-9]{3,8}$/;//创建验证密码的正在表达式\r\n          //4.判断用户名格式是否正确\r\n           if(!nreg.test(n)){\r\n               this.$toast(\"用户名格式不正确<由3-10位字母、数字组成>\");\r\n               return;\r\n           }\r\n          //5.判断密码格式是否正确\r\n         if(!preg.test(p)){\r\n             this.$toast(\"密码格式不正确<由3-8位字母、数字组成>\");\r\n             return;\r\n         }\r\n          //6.将用户名和密码发送ajax请求\r\n          var url=\"login\";\r\n          var obj={uname:n,upass:p};\r\n          //7.并获取服务器返回结果\r\n          this.axios.get(url,{params:obj}).then(result=>{\r\n           if(result.data.code==1){\r\n               localStorage.setItem(\"uid\",result.data.uid);//1  //uid\r\n               localStorage.setItem(\"uname\",result.data.uname);\r\n                  //console.log(result.data.uid)\r\n               this.$messagebox(\"消息\",result.data.msg);\r\n            //    localStorage.setItem(\"upass\",result.data.upass);\r\n             //9.返回成功 跳转到Home.vue\r\n            this.$router.push(\"/\");\r\n           }else{//8.返回失败\r\n             this.$messagebox(\"消息\",result.data.msg);\r\n           }\r\n          }); \r\n        },\r\n        showToggle(){\r\n            this.isShow = true;\r\n            var n=this.uname;\r\n            var p=this.upass;\r\n            var tel=this.tel;\r\n            var nreg=/^[a-zA-Z0-9]{3,10}$/;//创建验证用户名的正则表达式\r\n            var preg=/^[a-zA-Z0-9]{3,8}$/;//创建验证密码的正则表达式\r\n            var telreg=/^1[3-8][0-9]{9}$/;//创建验证手机号的正则表达式\r\n            //判断用户名格式是否正确\r\n            if(!nreg.test(n)){\r\n               this.$toast(\"用户名格式不正确<由3-10位字母、数字组成>\");\r\n               return;\r\n           }\r\n           //判断密码格式是否正确\r\n            if(!preg.test(p)){\r\n                this.$toast(\"密码格式不正确<由3-8位字母、数字组成>\");\r\n                return;\r\n            }\r\n            if(tel==\"\"){\r\n                this.$toast(\"手机号码不能为空\");\r\n                return;\r\n            }\r\n            if(!telreg.test(tel)){\r\n                this.$toast(\"手机号码格式不正确\");\r\n                return;\r\n            }\r\n            var url=\"regist\";\r\n            var obj={uname:n,upass:p,utel:tel}\r\n            //console.log(obj);\r\n            this.axios.get(url,{params:obj}).then(result=>{ \r\n                var phone=result.data;\r\n            if(result.data.code==4&&tel!=phone.utel){\r\n                //返回成功 跳转到Home.vue\r\n                this.$router.push(\"/login\");\r\n                alert(\"注册成功\");\r\n            }else{//返回失败\r\n             //console.log(result);\r\n                 this.$toast(\"该手机号已注册\");\r\n            //    this.$messagebox(\"消息\",result.data.msg);\r\n            } \r\n        });  \r\n        },\r\n    }\r\n}\r\n</script>\r\n<style>\r\n/* .mint-button--primary{background-color: #ff458e!important} */\r\n.back{position: absolute;left:3%;top:1.5%;z-index: 999;}\r\n.back button{background: transparent;border: none;color: #fff;font-size: 0.5rem;}\r\n.con-top{width:100%;height: 1.4rem;position: absolute;background-color: #26a2FF;top:0%;text-align:center;color: #fff;line-height: 1.4rem}\r\n.mt{position: absolute;top:18%;left: 6%;}\r\n.mint-cell-value{padding-top: 2%!important}\r\n.mt-bt{position:relative;line-height: 0.3rem}\r\n.mt-size,.mt-size2{width:70%!important;margin-left: 16%;}\r\n.mt-size{margin-top: 85%;}\r\n.mt-size2{margin-top: 3%;}\r\n</style>\r\n"]}]}